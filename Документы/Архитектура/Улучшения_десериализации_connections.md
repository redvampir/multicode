# Улучшения десериализации `connections` в GraphSerializer

## Статус внедрения

### ✅ Реализовано

1. **Изоляция побочных эффектов счётчиков NodeFactory (RAII-восстановление).**
   - Десериализация временно сдвигает счётчики для совместимости snapshot, но всегда возвращает исходные значения.

2. **Валидация направления портов (`Output -> Input`).**
   - Связь с неверными направлениями отклоняется с `kErrorConnection`.

3. **Валидация совместимости типов (`Execution` и data-порты).**
   - Execution-порт соединяется только с Execution.
   - Data-порты должны иметь одинаковый `DataType`.

4. **Проверка дублей рёбер.**
   - Есть защита от повторяющихся связей `{fromNode, fromPort, toNode, toPort}`.

5. **`connections[].id` сделан обязательным.**
   - Отсутствующий `id` валидируется как ошибка формата.

6. **Рефакторинг парсинга `connections` в отдельные helper-функции.**
   - Парсинг, резолв и семантическая валидация вынесены из основной ветки `from_json`.

7. **Улучшена диагностика ошибок с путём JSON.**
   - Сообщения включают контекст вида `connections[i]` и проблемное поле.

8. **Расширены тесты на негативные сценарии.**
   - Есть кейсы: отсутствующий `id`, дублирующийся `id`, `Output->Output`, `Execution->StringView`.

9. **Реализован агрегированный режим ошибок валидации.**
   - `from_json` собирает все ошибки валидации `connections` за проход и возвращает единый отчёт, а не только первую проблему.

10. **Добавлены fuzz/property-based сценарии для JSON `connections`.**
    - Добавлен детерминированный fuzz-тест с мутациями структуры и ID, подтверждающий отсутствие падений десериализатора.

## Критерии приёмки
- Нет утечек глобального состояния счётчиков после десериализации.
- Невалидные направления/типы/дубли connections корректно блокируются.
- Десериализатор устойчив к мутациям JSON и не падает.
